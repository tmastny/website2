---
title: 'Visualizing CPU Pipeling'
author: ~
date: '2024-11-30'
slug: visualizing-cpu-pipeling
categories: []
tags: []
description: 'Visualizing CPU Pipeling'
output:
  blogdown::html_page:
    toc: true
---



<p>Visualizing CPU Pipelining.</p>
<div class="pipeline-container">
  <div class="controls">
    <button onclick="stepBack()" class="control-button">◀ Previous</button>
    <button onclick="stepForward()" class="control-button">Next ▶</button>
    <button onclick="resetAnimation()" class="control-button">Reset</button>
  </div>
  
  <div class="timeline">
    <div class="cycle-label">Cycle</div>
    <div class="cycle">1</div>
<div class="cycle">2</div>
<div class="cycle">3</div>
<div class="cycle">4</div>
<div class="cycle">5</div>
<div class="cycle">6</div>
<div class="cycle">7</div>
<div class="cycle">8</div>
  </div>
  
  <div class="pipeline">
    
      <div class="instruction-row">
        <div class="instruction-name">add $t1</div>
        <div class="stages">
          <div class="stage if" style="grid-column: 1">IF</div>
<div class="stage id" style="grid-column: 2">ID</div>
<div class="stage ex" style="grid-column: 3">EX</div>
<div class="stage mem" style="grid-column: 4">MEM</div>
<div class="stage wb" style="grid-column: 5">WB</div>
        </div>
      </div>
    

      <div class="instruction-row">
        <div class="instruction-name">sub $t2</div>
        <div class="stages">
          <div class="stage if" style="grid-column: 2">IF</div>
<div class="stage id" style="grid-column: 3">ID</div>
<div class="stage ex" style="grid-column: 4">EX</div>
<div class="stage mem" style="grid-column: 5">MEM</div>
<div class="stage wb" style="grid-column: 6">WB</div>
        </div>
      </div>
    

      <div class="instruction-row">
        <div class="instruction-name">lw $t3</div>
        <div class="stages">
          <div class="stage if" style="grid-column: 3">IF</div>
<div class="stage id" style="grid-column: 4">ID</div>
<div class="stage ex" style="grid-column: 5">EX</div>
<div class="stage mem" style="grid-column: 6">MEM</div>
<div class="stage wb" style="grid-column: 7">WB</div>
        </div>
      </div>
    

      <div class="instruction-row">
        <div class="instruction-name">add $t5</div>
        <div class="stages">
          <div class="stage if" style="grid-column: 4">IF</div>
<div class="stage id" style="grid-column: 5">ID</div>
<div class="stage ex" style="grid-column: 6">EX</div>
<div class="stage mem" style="grid-column: 7">MEM</div>
<div class="stage wb" style="grid-column: 8">WB</div>
        </div>
      </div>
    

      <div class="instruction-row">
        <div class="instruction-name">and $t4</div>
        <div class="stages">
          <div class="stage if" style="grid-column: 5">IF</div>
<div class="stage id" style="grid-column: 6">ID</div>
<div class="stage ex" style="grid-column: 7">EX</div>
<div class="stage mem" style="grid-column: 8">MEM</div>
<div class="stage wb" style="grid-column: 9">WB</div>
        </div>
      </div>
    
  </div>
</div>

<style>
.pipeline-container {
  font-family: monospace;
  margin: 2em 0;
  padding: 2em;
  position: relative;
  width: 800px;  /* Fixed width */
  overflow-x: auto; /* Allow horizontal scroll if needed */
}

.controls {
  margin-bottom: 1em;
}

.control-button {
  padding: 0.5em 1em;
  margin-right: 0.5em;
  background: #f8f9fa;
  border: 1px solid #dee2e6;
  border-radius: 4px;
  cursor: pointer;
  font-family: monospace;
}

.control-button:hover {
  background: #e9ecef;
}

.timeline {
  display: grid;
  grid-template-columns: 100px repeat(8, 80px); /* Fixed width columns */
  gap: 10px;
  margin-bottom: 1.5em;
}

.cycle {
  text-align: center;
  color: #666;
}

.instruction-row {
  display: grid;
  grid-template-columns: 100px 1fr;
  margin-bottom: 10px;
}

.stages {
  display: grid;
  grid-template-columns: repeat(8, 80px); /* Fixed width columns */
  gap: 10px;
}

.stage {
  padding: 0.5em;
  text-align: center;
  background: #e6f3ff;
  border-radius: 4px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  opacity: 0;
}

/* Remove automatic animations */
.stage.if { background: #e6f3ff; }
.stage.id { background: #ccebff; }
.stage.ex { background: #99d6ff; }
.stage.mem { background: #66c2ff; }
.stage.wb { background: #33adff; }

.stage.visible {
  opacity: 1;
  transition: opacity 0.2s;
}

</style>

<script>
let currentStep = 0;
const maxSteps = 25; // Adjust based on total number of stages

function updateVisibility() {
  const stages = document.querySelectorAll('.stage');
  stages.forEach((stage, index) => {
    if (index < currentStep) {
      stage.classList.add('visible');
    } else {
      stage.classList.remove('visible');
    }
  });
}

function stepForward() {
  if (currentStep < maxSteps) {
    currentStep++;
    updateVisibility();
  }
}

function stepBack() {
  if (currentStep > 0) {
    currentStep--;
    updateVisibility();
  }
}

function resetAnimation() {
  currentStep = 0;
  updateVisibility();
}

// Initialize
document.addEventListener('DOMContentLoaded', function() {
  resetAnimation();
});
</script>
