---
title: 'R Snytax Highlighting in blogdown'
author: ~
date: '2020-06-20'
slug: r-syntax-highlight-blogdown-hugo
categories: []
tags: []
description:
output:
  blogdown::html_page:
    toc: true
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#monokai">Monokai</a>
<ul>
<li><a href="#github">Github</a></li>
<li><a href="#rstudio">RStudio</a></li>
<li><a href="#unique-highlighting">Unique highlighting</a></li>
<li><a href="#themes-and-parsing">Themes and Parsing</a></li>
<li><a href="#commonalities">Commonalities</a></li>
</ul></li>
</ul>
</div>

<table style="width:56%;">
<colgroup>
<col width="20%" />
<col width="12%" />
<col width="22%" />
</colgroup>
<thead>
<tr class="header">
<th>highlighter</th>
<th>type</th>
<th>tokens</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>highlight.js</td>
<td>client</td>
<td>strings,
keywords</td>
</tr>
<tr class="even">
<td>sublime</td>
<td>n/a</td>
<td>strings,
keywords,
arguments,
functions,
operators</td>
</tr>
<tr class="odd">
<td>Hugo</td>
<td>server</td>
<td>strings,
keywords,
functions,
operators</td>
</tr>
<tr class="even">
<td>Github</td>
<td>n/a</td>
<td>strings,
argumnets,
some keywords</td>
</tr>
<tr class="odd">
<td>RStudio</td>
<td>n/a</td>
<td>strings,
keywords,
operators,
parentheses</td>
</tr>
</tbody>
</table>
<div id="monokai" class="section level2">
<h2>Monokai</h2>
<p>Sublime</p>
<p><img src="sublime-monokai.png" /></p>
<p>Hugo</p>
<p><img src="hugo-monokai.png" /></p>
<p>highlight.js</p>
<p><img src="highlightjs-monokai.png" /></p>
<div id="github" class="section level3">
<h3>Github</h3>
<p>Actual Github</p>
<p><img src="github.png" /></p>
<p>highlight.js</p>
<pre class="r"><code>library(tidyverse)

urchins &lt;- read_csv(&quot;https://tidymodels.org/start/models/urchins.csv&quot;) %&gt;%
  setNames(c(&quot;food_regime&quot;, &quot;initial_volume&quot;, &quot;width&quot;)) %&gt;%
  mutate(food_regime = factor(food_regime, levels = c(&quot;Init&quot;, &quot;Low&quot;, &quot;High&quot;)))

urchins %&gt;%
  group_by(food_regime) %&gt;%
  summarise(
    across(everything(), mean), n = n()
  )

mean(urchins$width)
ggplot2::cut_interval(urchins$initial_volume)</code></pre>
</div>
<div id="rstudio" class="section level3">
<h3>RStudio</h3>
<p><img src="rstudio-modern.png" /></p>
</div>
<div id="unique-highlighting" class="section level3">
<h3>Unique highlighting</h3>
<p>There is also the highlight <a href="https://github.com/romainfrancois/highlight">R package</a>,
which does semantic highlighting, where words have
unique coloring depending on the context.</p>
<p>pandoc themes. They are conclusively covered here,
so I won’t provide a full array: <a href="https://www.garrickadenbuie.com/blog/pandoc-syntax-highlighting-examples/" class="uri">https://www.garrickadenbuie.com/blog/pandoc-syntax-highlighting-examples/</a></p>
<p><a href="https://github.com/rstudio/blogdown/issues/360" class="uri">https://github.com/rstudio/blogdown/issues/360</a></p>
</div>
<div id="themes-and-parsing" class="section level3">
<h3>Themes and Parsing</h3>
<p>Client-side and server-side.</p>
</div>
<div id="commonalities" class="section level3">
<h3>Commonalities</h3>
<p>Save for the unique semantic highlight, there we can find commonalities along
two dimensions: themes and syntax.</p>
<p>Themes are primarily designed around colors, but even then there isn’t
a lot of consistency between implementations.</p>
<p>And then there are the parsing rules. These rules decide which tokens gets
highlighted.</p>
<p>The problem with highlight.js is that there aren’t enough parsing rules:</p>
<pre class="html"><code>&lt;pre class=&quot;r&quot;&gt;
  &lt;code class=&quot;hljs&quot;&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;library&lt;/span&gt;(tidyverse)

    urchins &amp;lt;- read_csv(&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://tidymodels.org/start/models/urchins.csv&quot;&lt;/span&gt;) %&amp;gt;%
    setNames(c(&lt;span class=&quot;hljs-string&quot;&gt;&quot;food_regime&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;initial_volume&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;width&quot;&lt;/span&gt;)) %&amp;gt;%
    mutate(food_regime = factor(food_regime, levels = c(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Init&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Low&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;High&quot;&lt;/span&gt;)))

    urchins %&amp;gt;%
    group_by(food_regime) %&amp;gt;%
    summarise(
      across(everything(), mean), n = n()
    )

    mean(urchins$width)
    ggplot2::cut_interval(urchins$initial_volume)
  &lt;/code&gt;
&lt;/pre&gt;</code></pre>
<p>Only strings and the word <code>library</code> are being highlighted.</p>
</div>
</div>
