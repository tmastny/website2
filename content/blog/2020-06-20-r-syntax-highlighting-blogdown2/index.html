---
title: 'R Snytax Highlighting in blogdown'
author: ~
date: '2020-06-20'
slug: r-syntax-highlight-blogdown-hugo
categories: []
tags: []
description:
draft: true
output:
  blogdown::html_page:
    toc: true
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#unique-highlighting">Unique highlighting</a></li>
<li><a href="#themes-and-parsing">Themes and Parsing</a></li>
<li><a href="#commonalities">Commonalities</a></li>
</ul>
</div>

<table style="width:56%;">
<colgroup>
<col width="20%" />
<col width="12%" />
<col width="22%" />
</colgroup>
<thead>
<tr class="header">
<th>highlighter</th>
<th>type</th>
<th>tokens</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>highlight.js</td>
<td>client</td>
<td>strings,
keywords</td>
</tr>
<tr class="even">
<td>sublime</td>
<td>n/a</td>
<td>strings,
keywords,
arguments,
functions,
operators</td>
</tr>
<tr class="odd">
<td>Hugo</td>
<td>server</td>
<td>strings,
keywords,
functions,
operators</td>
</tr>
<tr class="even">
<td>Github</td>
<td>n/a</td>
<td>strings,
argumnets,
some keywords</td>
</tr>
<tr class="odd">
<td>RStudio</td>
<td>n/a</td>
<td>strings,
keywords,
operators,
parentheses</td>
</tr>
</tbody>
</table>
<div id="unique-highlighting" class="section level3">
<h3>Unique highlighting</h3>
<p>There is also the highlight <a href="https://github.com/romainfrancois/highlight">R package</a>,
which does semantic highlighting, where words have
unique coloring depending on the context.</p>
<p>pandoc themes. They are conclusively covered here,
so I won’t provide a full array: <a href="https://www.garrickadenbuie.com/blog/pandoc-syntax-highlighting-examples/" class="uri">https://www.garrickadenbuie.com/blog/pandoc-syntax-highlighting-examples/</a></p>
<p><a href="https://github.com/rstudio/blogdown/issues/360" class="uri">https://github.com/rstudio/blogdown/issues/360</a></p>
</div>
<div id="themes-and-parsing" class="section level3">
<h3>Themes and Parsing</h3>
<p>Client-side and server-side.</p>
</div>
<div id="commonalities" class="section level3">
<h3>Commonalities</h3>
<p>Save for the unique semantic highlight, there we can find commonalities along
two dimensions: themes and syntax.</p>
<p>Themes are primarily designed around colors, but even then there isn’t
a lot of consistency between implementations.</p>
<p>And then there are the parsing rules. These rules decide which tokens gets
highlighted.</p>
<p>The problem with highlight.js is that there aren’t enough parsing rules:</p>
<pre class="html"><code>&lt;pre class=&quot;r&quot;&gt;
  &lt;code class=&quot;hljs&quot;&gt;
    &lt;span class=&quot;hljs-keyword&quot;&gt;library&lt;/span&gt;(tidyverse)

    urchins &amp;lt;- read_csv(&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://tidymodels.org/start/models/urchins.csv&quot;&lt;/span&gt;) %&amp;gt;%
    setNames(c(&lt;span class=&quot;hljs-string&quot;&gt;&quot;food_regime&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;initial_volume&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;width&quot;&lt;/span&gt;)) %&amp;gt;%
    mutate(food_regime = factor(food_regime, levels = c(&lt;span class=&quot;hljs-string&quot;&gt;&quot;Init&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;Low&quot;&lt;/span&gt;, &lt;span class=&quot;hljs-string&quot;&gt;&quot;High&quot;&lt;/span&gt;)))

    urchins %&amp;gt;%
    group_by(food_regime) %&amp;gt;%
    summarise(
      across(everything(), mean), n = n()
    )

    mean(urchins$width)
    ggplot2::cut_interval(urchins$initial_volume)
  &lt;/code&gt;
&lt;/pre&gt;</code></pre>
<p>Only strings and the word <code>library</code> are being highlighted.</p>
<p>Ideas to improve highlight.js: <a href="https://stackoverflow.com/questions/51110878/how-to-highlight-all-r-function-names-with-highlight-js" class="uri">https://stackoverflow.com/questions/51110878/how-to-highlight-all-r-function-names-with-highlight-js</a></p>
<p>Rainbow is interesting. In monokai, certain tokens are parsed, but not
colored by the theme.</p>
<pre class="html"><code>&lt;pre class=&quot;language-r rainbow-show&quot; data-trimmed=&quot;true&quot;&gt;&lt;code class=&quot;rainbow rainbow-show&quot;&gt;&lt;span class=&quot;function call&quot;&gt;library&lt;/span&gt;(tidyverse)

urchins &lt;span class=&quot;keyword operator&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;function call&quot;&gt;read_csv&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;https://tidymodels.org/start/models/urchins.csv&quot;&lt;/span&gt;) %&lt;span class=&quot;keyword operator&quot;&gt;&amp;gt;&lt;/span&gt;%
  &lt;span class=&quot;function call&quot;&gt;setNames&lt;/span&gt;(&lt;span class=&quot;function call&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;food_regime&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;initial_volume&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;width&quot;&lt;/span&gt;)) %&lt;span class=&quot;keyword operator&quot;&gt;&amp;gt;&lt;/span&gt;%
  &lt;span class=&quot;function call&quot;&gt;mutate&lt;/span&gt;(food_regime &lt;span class=&quot;keyword operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;function call&quot;&gt;factor&lt;/span&gt;(food_regime, levels &lt;span class=&quot;keyword operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;function call&quot;&gt;c&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Init&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;Low&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;High&quot;&lt;/span&gt;)))

urchins %&lt;span class=&quot;keyword operator&quot;&gt;&amp;gt;&lt;/span&gt;%
  &lt;span class=&quot;function call&quot;&gt;group_by&lt;/span&gt;(food_regime) %&lt;span class=&quot;keyword operator&quot;&gt;&amp;gt;&lt;/span&gt;%
  &lt;span class=&quot;function call&quot;&gt;summarise&lt;/span&gt;(
    &lt;span class=&quot;function call&quot;&gt;across&lt;/span&gt;(&lt;span class=&quot;function call&quot;&gt;everything&lt;/span&gt;(), mean), n &lt;span class=&quot;keyword operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;function call&quot;&gt;n&lt;/span&gt;()
  )

&lt;span class=&quot;function call&quot;&gt;mean&lt;/span&gt;(urchins&lt;span class=&quot;keyword operator&quot;&gt;$&lt;/span&gt;width)
&lt;span class=&quot;namespace&quot;&gt;ggplot2&lt;/span&gt;&lt;span class=&quot;keyword operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;function call&quot;&gt;cut_interval&lt;/span&gt;(urchins&lt;span class=&quot;keyword operator&quot;&gt;$&lt;/span&gt;initial_volume)&lt;/code&gt;&lt;div class=&quot;preloader&quot;&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;preloader&quot;&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/pre&gt;</code></pre>
</div>
