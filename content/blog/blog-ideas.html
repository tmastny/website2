---
title: Blog ideas
author: ~
date: '2017-01-01'
slug: blog-ideas
categories: []
tags: []
description: 
draft: false
output:
  blogdown::html_page:
    toc: true 
---


<div id="TOC">
<ul>
<li><a href="#blog-ideas">Blog Ideas</a></li>
<li><a href="#try-out-some-python">Try out some Python</a></li>
<li><a href="#using-callr-to-improve-unit-tests">using callr to improve unit tests</a></li>
<li><a href="#background">Background</a></li>
<li><a href="#question">Question</a></li>
<li><a href="#ideas">Ideas</a></li>
</ul>
</div>

<div id="blog-ideas" class="section level2">
<h2>Blog Ideas</h2>
<p>Best linear ordering of US states: <a href="http://benschmidt.org/2014/06/05/optimally-ordering-geographical-entities-in-linear-space/" class="uri">http://benschmidt.org/2014/06/05/optimally-ordering-geographical-entities-in-linear-space/</a> <a href="http://sappingattention.blogspot.com/2016/12/a-192-year-heatmap-of-presidential.html" class="uri">http://sappingattention.blogspot.com/2016/12/a-192-year-heatmap-of-presidential.html</a></p>
<p>Gender Binary <a href="http://bookworm.benschmidt.org/posts/2015-10-30-rejecting-the-gender-binary.html" class="uri">http://bookworm.benschmidt.org/posts/2015-10-30-rejecting-the-gender-binary.html</a></p>
<p>via word embeddings <a href="http://bookworm.benschmidt.org/posts/2015-10-25-Word-Embeddings.html" class="uri">http://bookworm.benschmidt.org/posts/2015-10-25-Word-Embeddings.html</a></p>
</div>
<div id="try-out-some-python" class="section level2">
<h2>Try out some Python</h2>
<p>Python reticular code does not seem to work wtih caching.</p>
<pre class="python"><code>x = 2</code></pre>
<pre class="python"><code>print(x + 2)</code></pre>
<pre><code>## 4</code></pre>
</div>
<div id="using-callr-to-improve-unit-tests" class="section level2">
<h2>using callr to improve unit tests</h2>
</div>
<div id="background" class="section level2">
<h2>Background</h2>
<p>I’ve noticed that clicking the <strong>Knit</strong> button in RStudio is not quite the same as running <code>knitr::knit(...)</code> or <code>rmarkdown::render(...)</code> (alluded to in this <a href="https://github.com/rstudio/rmarkdown/issues/17#issuecomment-37241816">github issue</a> and in these <a href="https://slides.yihui.name/2017-rstudio-conf-rmarkdown-Yihui-Xie.html#6">slides</a>). In particular, it seems that clicking the <strong>Knit</strong> button starts a new R session and all the packages are reloaded.</p>
<p>I’ve looked for the actual <strong>Knit</strong> button code in the RStudio <a href="https://github.com/rstudio/rstudio">github repo</a> but couldn’t find anything. I found references to the <strong>Knit</strong> button object, but not the actual code to run it. Maybe it is proprietary?</p>
</div>
<div id="question" class="section level2">
<h2>Question</h2>
<p>Is there a way to replicate clicking the <code>Knit</code> button within a unit testing framework (preferably <a href="https://github.com/r-lib/testthat"><code>testthat</code></a>) for an R package?</p>
<p>For what I understand from this <a href="https://stackoverflow.com/questions/32257970/knitr-inherits-variables-from-a-users-environment-even-with-envir-new-env">SO question</a> is that there is no good way to get a fresh R session without restarting.</p>
<p>In my case, unless my call to <code>rmarkdown::render(..., envir = new.env())</code> occurs in the first test, knitting the <code>.Rmd</code> is not the same as clicking the <strong>Knit</strong> button because other tests can change package globals or create side-effects that persist through <code>render</code>.</p>
</div>
<div id="ideas" class="section level2">
<h2>Ideas</h2>
<p>Could it be done by creating a new R session within the <code>testthat</code> R session?</p>
<p>I also browsed through the <code>knitr</code> <a href="https://github.com/yihui/knitr/tree/master/tests/testit">unit tests</a>, but didn’t noticed anything that might help.</p>
</div>
